"use strict";(self.webpackChunkcurrency_quotes_frontend=self.webpackChunkcurrency_quotes_frontend||[]).push([[125],{2125:(et,C,s)=>{s.r(C),s.d(C,{CurrencyQuotesModule:()=>z});var p=s(177),v=s(9096),a=s(7675),i=s(4341),Q=s(1413),f=s(6977),t=s(7705),k=s(3236),E=s(9974),D=s(4360),F=s(8750),T=s(1584);var j=s(3855);let I=(()=>{class e{constructor(n){this.socket=n}getMessage(){return this.socket.fromEvent("currencyRates").pipe(function $(e,r=k.E,n){const u=(0,T.O)(e,r);return function _(e,r){return(0,E.N)((n,u)=>{const{leading:o=!0,trailing:d=!1}=r??{};let m=!1,y=null,c=null,h=!1;const W=()=>{c?.unsubscribe(),c=null,d&&(S(),h&&u.complete())},tt=()=>{c=null,h&&u.complete()},g=l=>c=(0,F.Tg)(e(l)).subscribe((0,D._)(u,W,tt)),S=()=>{if(m){m=!1;const l=y;y=null,u.next(l),!h&&g(l)}};n.subscribe((0,D._)(u,l=>{m=!0,y=l,(!c||c.closed)&&(o?S():g(l))},()=>{h=!0,(!(d&&m&&c)||c.closed)&&u.complete()}))})}(()=>u,n)}(500))}connectSocket(){this.socket.connect()}disconnectSocket(){this.socket.disconnect()}static{this.\u0275fac=function(u){return new(u||e)(t.KVO(j.y))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var b=s(6354);var x=s(1626);let B=(()=>{class e{constructor(n){this.http=n,this.apiUrl="http://localhost:3000/api"}setIntervalTimeout(n){return this.http.post(`${this.apiUrl}/setIntervalTimeout`,{timeout:n}).pipe((0,b.T)(o=>o.message))}stopStartSendingData(n){return this.http.post(`${this.apiUrl}/stopStartSendingData`,{command:n}).pipe((0,b.T)(o=>o.message))}static{this.\u0275fac=function(u){return new(u||e)(t.KVO(x.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var V=s(3477);function M(e,r){1&e&&(t.j41(0,"div"),t.EFF(1," \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 50. "),t.k0s())}function N(e,r){1&e&&(t.j41(0,"div"),t.EFF(1," \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 1000. "),t.k0s())}function U(e,r){if(1&e&&(t.j41(0,"div",23),t.DNE(1,M,2,0,"div",24),t.DNE(2,N,2,0,"div",24),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.Y8G("ngIf",null==n.frequency||null==n.frequency.errors?null:n.frequency.errors.min),t.R7$(1),t.Y8G("ngIf",null==n.frequency||null==n.frequency.errors?null:n.frequency.errors.max)}}function G(e,r){1&e&&(t.j41(0,"th",25),t.EFF(1,"Date"),t.k0s())}function H(e,r){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=r.$implicit;t.R7$(1),t.SpI(" ",t.i5U(2,1,n.time,"dd.MM.yy-HH:mm:ss")," ")}}function O(e,r){1&e&&(t.j41(0,"th",27),t.EFF(1," Symbol "),t.k0s())}function Y(e,r){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const n=r.$implicit;t.R7$(1),t.SpI(" ",n.symbol," ")}}function A(e,r){1&e&&(t.j41(0,"th",28),t.EFF(1,"Ask"),t.k0s())}function q(e,r){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&e){const n=r.$implicit;t.R7$(1),t.SpI(" ",t.i5U(2,1,n.ask,"1.4-4")," ")}}function w(e,r){1&e&&(t.j41(0,"th",29),t.EFF(1,"Bid"),t.k0s())}function P(e,r){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&e){const n=r.$implicit;t.R7$(1),t.SpI(" ",t.i5U(2,1,n.bid,"1.4-4")," ")}}function X(e,r){1&e&&t.nrm(0,"tr",30)}function K(e,r){1&e&&t.nrm(0,"tr",31,32)}const L=[{path:"",component:(()=>{class e{constructor(n,u,o){this.socketService=n,this.restApi=u,this.snackBar=o,this._complete$=new Q.B,this.dataSource=new a.I6,this.displayedColumnsView=["time","symbol","ask","bid"],this.frequency=new i.MJ(null,[i.k0.min(50),i.k0.max(1e3)])}ngOnInit(){this.socketService.connectSocket(),this.socketService.getMessage().subscribe(n=>{this.dataSource.data=[...n]})}stopSendingData(){this.restApi.stopStartSendingData("stop").pipe((0,f.Q)(this._complete$)).subscribe(n=>{this.snackBar.open(n,"",{duration:1e3})})}startSendingData(){this.restApi.stopStartSendingData("start").pipe((0,f.Q)(this._complete$)).subscribe(n=>{this.snackBar.open(n,"",{duration:1e3})})}onFrequencyValueSubmit(n){this.restApi.setIntervalTimeout(this.frequency.value).pipe((0,f.Q)(this._complete$)).subscribe(o=>{this.snackBar.open(o,"",{duration:1e3}),this.frequency.setValue(null)},o=>{console.log(o)})}ngOnDestroy(){this.restApi.stopStartSendingData("stop").pipe((0,f.Q)(this._complete$)).subscribe(n=>{this.socketService.disconnectSocket(),this._complete$.next(),this._complete$.complete()})}static{this.\u0275fac=function(u){return new(u||e)(t.rXU(I),t.rXU(B),t.rXU(V.UG))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-currency-quotes"]],decls:30,vars:7,consts:[[1,"currencyQuotes"],[1,"currencyQuotes__navbar"],[1,"currencyQuotes__navbar__frequency"],[1,"form",3,"ngSubmit"],[1,"form-field"],["type","number","placeholder","\u0427\u0430\u0441\u0442\u043e\u0442\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445",1,"form-field-input",3,"formControl"],["class","form-field-errors",4,"ngIf"],[1,"btn","submit",3,"disabled"],[1,"currencyQuotes__navbar__actions"],[1,"btn","currencyQuotes__navbar__actions__item",3,"click"],[1,"currencyQuotes__content"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","time"],["mat-header-cell","","mat-sort-header","time",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","symbol"],["mat-header-cell","","mat-sort-header","symbol",4,"matHeaderCellDef"],["matColumnDef","ask"],["mat-header-cell","","mat-sort-header","ask",4,"matHeaderCellDef"],["matColumnDef","bid"],["mat-header-cell","","mat-sort-header","bid",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"form-field-errors"],[4,"ngIf"],["mat-header-cell","","mat-sort-header","time"],["mat-cell",""],["mat-header-cell","","mat-sort-header","symbol"],["mat-header-cell","","mat-sort-header","ask"],["mat-header-cell","","mat-sort-header","bid"],["mat-header-row",""],["mat-row",""],["matrow",""]],template:function(u,o){1&u&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),t.bIt("ngSubmit",function(m){return o.onFrequencyValueSubmit(m)}),t.j41(4,"div",4),t.nrm(5,"input",5),t.DNE(6,U,3,2,"div",6),t.k0s(),t.j41(7,"button",7),t.EFF(8," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c "),t.k0s()()(),t.j41(9,"div",8)(10,"button",9),t.bIt("click",function(){return o.stopSendingData()}),t.EFF(11," \u041e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 "),t.k0s(),t.j41(12,"button",9),t.bIt("click",function(){return o.startSendingData()}),t.EFF(13," \u041d\u0430\u0447\u0430\u0442\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 "),t.k0s()()(),t.j41(14,"div",10)(15,"table",11),t.qex(16,12),t.DNE(17,G,2,0,"th",13),t.DNE(18,H,3,4,"td",14),t.bVm(),t.qex(19,15),t.DNE(20,O,2,0,"th",16),t.DNE(21,Y,2,1,"td",14),t.bVm(),t.qex(22,17),t.DNE(23,A,2,0,"th",18),t.DNE(24,q,3,4,"td",14),t.bVm(),t.qex(25,19),t.DNE(26,w,2,0,"th",20),t.DNE(27,P,3,4,"td",14),t.bVm(),t.DNE(28,X,1,0,"tr",21),t.DNE(29,K,2,0,"tr",22),t.k0s()()()),2&u&&(t.R7$(5),t.Y8G("formControl",o.frequency),t.R7$(1),t.Y8G("ngIf",o.frequency.invalid&&o.frequency.touched),t.R7$(1),t.Y8G("disabled",!o.frequency.valid||!o.frequency.value),t.R7$(8),t.Y8G("dataSource",o.dataSource),t.R7$(13),t.Y8G("matHeaderRowDef",o.displayedColumnsView)("matHeaderRowDefSticky",!0),t.R7$(1),t.Y8G("matRowDefColumns",o.displayedColumnsView))},dependencies:[p.bT,a.Zl,a.tL,a.ji,a.cC,a.YV,a.iL,a.KS,a.$R,a.YZ,a.NB,i.qT,i.me,i.Q0,i.BC,i.cb,i.cV,i.l_,p.QX,p.vh],styles:[".currencyQuotes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.currencyQuotes__navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.currencyQuotes__navbar__actions[_ngcontent-%COMP%]{display:flex;gap:4px}.currencyQuotes__navbar__actions__item[_ngcontent-%COMP%]{padding:8px 12px;color:#8ca7c0;border:1px solid #8ca7c0;background-color:#fff}.currencyQuotes__navbar__actions__item[_ngcontent-%COMP%]:hover{background-color:#8ca7c0;color:#fff;transform:translateY(-3px)}.currencyQuotes__navbar__actions__item[_ngcontent-%COMP%]:active{transform:translateY(1px)}"],changeDetection:0})}}return e})()}];let Z=(()=>{class e{static{this.\u0275fac=function(u){return new(u||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[v.iI.forChild(L),v.iI]})}}return e})();var J=s(3905);let z=(()=>{class e{static{this.\u0275fac=function(u){return new(u||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[p.MD,Z,J.G]})}}return e})()}}]);